<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Wynik Wyceny</title>
  <script>
    function updateServiceCost() {
      const manHourValue = parseFloat(document.getElementById("manHourValue").value);
      const serviceDuration = parseFloat(document.getElementById("serviceDuration").value);

      if (!isNaN(manHourValue) && !isNaN(serviceDuration)) {
        const serviceCost = manHourValue * serviceDuration;
        document.getElementById("serviceCost").innerText = serviceCost.toFixed(2);
      } else {
        document.getElementById("serviceCost").innerText = "0.00";
      }
    }
  </script>
</head>
<body>
<h1>Wynik Wyceny</h1>

<h2>Elementy Wyceny</h2>
<ul>
  <li>Koszty działalności: <span th:text="${pricing.businessOperating}"> zł</span></li>
  <li>Koszty pracowników: <span th:text="${pricing.employees}"> zł</span></li>
  <li>Koszty wyposażenia: <span th:text="${pricing.equipment}"> zł</span></li>
  <li>Koszty produktów: <span th:text="${pricing.products}"> zł</span></li>
  <li>Koszty szkoleń: <span th:text="${pricing.training}"> zł</span></li>
  <li>Zysk netto: <span th:text="${pricing.income}"> zł</span></li>
  <li>Podatki: <span th:text="${pricing.taxes}"> zł</span></li>
  <li>Liczba roboczogodzin: <span th:text="${pricing.manHours}"></span></li>
</ul>

<h2>Obliczona Wartość Roboczogodziny</h2>
<p>Wartość roboczogodziny: <span th:text="${manHourValue}"></span> zł</p>
<input type="hidden" id="manHourValue" th:value="${manHourValue}">

<h2>Obliczenie Kosztu Usługi</h2>
<form oninput="updateServiceCost()">
  <label for="serviceDuration">Czas trwania usługi (godziny):</label>
  <input type="number" id="serviceDuration" name="serviceDuration" min="0.1" step="0.1" required>
  <br>
  <p>Koszt usługi: <span id="serviceCost">0.00</span> PLN</p>
</form>

<h2>Zapisz Dane</h2>
<form th:action="@{/pricing/save}" method="post">
  <input type="hidden" name="manHourValue" th:value="${manHourValue}">
  <input type="hidden" name="businessOperating" th:value="${pricing.businessOperating}">
  <input type="hidden" name="employees" th:value="${pricing.employees}">
  <input type="hidden" name="equipment" th:value="${pricing.equipment}">
  <input type="hidden" name="products" th:value="${pricing.products}">
  <input type="hidden" name="training" th:value="${pricing.training}">
  <input type="hidden" name="income" th:value="${pricing.income}">
  <input type="hidden" name="taxes" th:value="${pricing.taxes}">
  <input type="hidden" name="manHours" th:value="${pricing.manHours}">

  <button type="submit">Zapisz dane wyceny</button>
</form>

<a href="/pricing/form">
  <button>Powrót</button>
</a>
</body>
</html>
